(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),l=c(30),o=c.n(l),i=(c(36),c(12)),r=c(3),s=(c(37),c(38),c(0));function d(){return Object(s.jsxs)("header",{children:[Object(s.jsxs)("nav",{children:[Object(s.jsx)(i.b,{to:"/skills",children:"skills"}),Object(s.jsx)(i.b,{to:"/projects",children:"projects"})]}),Object(s.jsx)("nav",{children:Object(s.jsx)("button",{children:"log out"})})]})}var j=c(2),u=c(9),p=c(15),b=c(20),g=c.n(b),h="http://localhost:5000",m=g.a.create({baseURL:h,headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2MTk5MDYxODF9.jqsNOEJra3wrT7f8Ae5KjTVkCyyL042VpA5SFYmwktc")}}),f=g.a.create({baseURL:h});function O(e){var t=e.project,c=e.projectForm,n=e.setProjectForm,a=e.index;return Object(s.jsx)("form",{className:"projectForm",onSubmit:function(e){e.preventDefault(),e.persist(),function(e){var t=Object(j.a)({},c);n(t)}()},children:Object(s.jsxs)("label",{htmlFor:"project-".concat(t.id,"-title"),children:[Object(s.jsx)("p",{children:"title:"}),Object(s.jsx)("input",{type:"text",value:t.title,name:"title",id:"project-".concat(t.id,"-title"),onChange:function(e){e.persist(),function(e){var t=Object(j.a)({},c);t.local[a][e.target.name]=e.target.value,n(t)}(e)}})]})},"project-".concat(t.id))}var v={id:"new",title:"",description:"",image:null,url:"",github:"",rank:0,localImage:"".concat("http://localhost:5000","/images/defaultLogo.png"),skills:[]};function x(){var e=Object(n.useState)({saved:[],local:[]}),t=Object(p.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){f.get("/api/portfolio/projects").then((function(e){var t="".concat("http://localhost:5000","/images"),c=v;a({saved:[Object(j.a)({},c)].concat(Object(u.a)(e.data.projects.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{localImage:null===e.image?"".concat(t,"/defaultImage.png"):"".concat(t,"/").concat(e.image)})})))),local:[Object(j.a)({},c)].concat(Object(u.a)(e.data.projects.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{localImage:null===e.image?"".concat(t,"/defaultImage.png"):"".concat(t,"/").concat(e.image)})}))))})})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Projects"}),c.local.length>0&&c.local.map((function(e,t){return O({project:e,index:t,projectForm:c,setProjectForm:a})})),Object(s.jsx)("p",{style:{fontSize:"smaller"},children:"*required"})]})}var k={id:"new",long_name:"",short_name:"",logo:null,localLogo:"".concat("http://localhost:5000","/images/defaultLogo.png"),proficiency:1};function y(e){var t=e.skill,c=e.index,n=e.skillForm,a=e.setSkillForm,l=!Object.entries(n.local[c]).map((function(e){return e[1]===n.saved[c][e[0]]})).some((function(e){return!1===e})),o={apply:0===n.local[c].long_name.length||l,revert:l},i=function(e){var t=Object(j.a)({},n);t.local[c][e.target.name]=e.target.value,parseInt(e.target.value)&&(t.local[c][e.target.name]=parseInt(e.target.value)),"logo"===e.target.name&&(t.local[c].localLogo=URL.createObjectURL(e.target.files[0])),a(t)},r=function(e,l){if(200===e.status||201===e.status){var o,i=Object(j.a)({},n);(null===(o=e.data)||void 0===o?void 0:o.addedSkillId)?(i.local[0]=k,i.local.push(Object(j.a)(Object(j.a)({},t),{},{id:e.data.addedSkillId})),i.saved.push(Object(j.a)(Object(j.a)({},t),{},{id:e.data.addedSkillId}))):"delete"===l?(i.local.splice(c,1),i.saved.splice(c,1)):i.saved=Object(u.a)(i.local.map((function(e){return Object(j.a)({},e)}))),a(i)}else console.log("error: unexpected response from server")};return Object(s.jsxs)("form",{className:"skillForm",onSubmit:function(e){e.preventDefault(),e.persist(),function(e){var a=n.local[c].logo===n.saved[c].logo?"multipart/form":"application/x-www-form-urlencoded",l=0===c?"post":"put",o=0===c?"api/portfolio/skills/":"api/portfolio/skills/".concat(t.id),i=new FormData;i.append("long_name",e.target.long_name.value),i.append("short_name",e.target.short_name.value),i.append("proficiency",e.target.proficiency.value),n.local[c].logo!==n.saved[c].logo&&i.append("logo",e.target.logo.files[0]),m({method:l,headers:{"Content-Type":a},url:o,data:i}).then((function(e){r(e,l)}))}(e)},children:[Object(s.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-long_name"),children:[Object(s.jsx)("p",{children:"long name*:"}),Object(s.jsx)("input",{type:"text",value:n.local[c].long_name,id:"skill-".concat(t.id,"-long_name"),name:"long_name",className:n.local[c].long_name===n.saved[c].long_name?"unchanged":"changed",onChange:function(e){e.persist(),e.preventDefault(),i(e)}})]}),Object(s.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-short_name"),children:[Object(s.jsx)("p",{children:"short name:"}),Object(s.jsx)("input",{type:"text",value:n.local[c].short_name,id:"skill-".concat(t.id,"-short_name"),name:"short_name",className:n.local[c].short_name===n.saved[c].short_name?"unchanged":"changed",onChange:function(e){e.persist(),e.preventDefault(),i(e)}})]}),Object(s.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-logo"),children:[Object(s.jsx)("p",{children:"logo:"}),Object(s.jsx)("img",{src:n.local[c].localLogo,alt:"".concat(n.local[c].long_name,"-logo"),className:"logo"}),Object(s.jsx)("input",{id:"skill-".concat(t.id,"-logo"),name:"logo",type:"file",onChange:function(e){e.persist(),i(e)}})]}),Object(s.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-proficiency"),children:[Object(s.jsx)("p",{children:"proficiency:"}),Object(s.jsxs)("select",{value:n.local[c].proficiency,id:"skill-".concat(t.id,"-proficiency"),name:"proficiency",className:n.local[c].proficiency===n.saved[c].proficiency?"unchanged":"changed",onChange:function(e){e.persist(),i(e)},children:[Object(s.jsx)("option",{value:1,children:"beginner"}),Object(s.jsx)("option",{value:2,children:"intermediate"}),Object(s.jsx)("option",{value:3,children:"advanced"}),Object(s.jsx)("option",{value:4,children:"expert"})]})]}),Object(s.jsxs)("span",{className:"form-buttons",children:[Object(s.jsx)("button",{type:"submit",className:"apply",disabled:o.apply,children:"new"===t.id?"add":"apply"}),Object(s.jsx)("button",{disabled:o.revert,className:"revert",onClick:function(e){e.preventDefault(),e.persist(),function(e){var t=Object(j.a)({},n);t.local[c]=Object(j.a)({},n.saved[c]),a(t)}()},children:"revert"}),0!==c&&Object(s.jsx)("button",{className:"delete",onClick:function(e){e.preventDefault(),e.persist(),m.delete("/api/portfolio/skills/".concat(t.id),{data:"asdf"}).then((function(e){200===e.status?r(e,"delete"):console.log("server error")})).catch((function(e){return console.log(e)}))},children:"delete"})]})]},"skill-".concat(t.id))}function F(){var e=Object(n.useState)({saved:[],local:[]}),t=Object(p.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){f.get("/api/portfolio/skills").then((function(e){var t="".concat("http://localhost:5000","/images"),c=k;a({saved:[Object(j.a)({},c)].concat(Object(u.a)(e.data.skills.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{localLogo:null===e.logo?"".concat(t,"/defaultLogo.png"):"".concat(t,"/").concat(e.logo)})})))),local:[Object(j.a)({},c)].concat(Object(u.a)(e.data.skills.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{localLogo:null===e.logo?"".concat(t,"/defaultLogo.png"):"".concat(t,"/").concat(e.logo)})}))))})})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"skills"}),c.local.length>0&&c.local.map((function(e,t){return y({skill:e,index:t,skillForm:c,setSkillForm:a})})),Object(s.jsx)("p",{style:{fontSize:"smaller"},children:"*required"})]})}var _=function(){return Object(s.jsx)("div",{id:"mainContainer",children:Object(s.jsxs)(i.a,{children:[Object(s.jsx)(d,{}),Object(s.jsxs)("div",{id:"contentContainer",children:[Object(s.jsx)(r.a,{path:"/skills",children:Object(s.jsx)(F,{})}),Object(s.jsx)(r.a,{path:"/projects",children:Object(s.jsx)(x,{})})]})]})})},I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,l=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),l(e),o(e)}))};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(_,{})}),document.getElementById("root")),I()}},[[63,1,2]]]);
//# sourceMappingURL=main.c5709b8e.chunk.js.map