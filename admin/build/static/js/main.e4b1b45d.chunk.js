(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{23:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),l=c(17),o=c.n(l),i=(c(23),c(5)),r=(c(24),c(25),c(18)),s=c.n(r).a.create({baseURL:"http://localhost:5000",withCredentials:!0}),d=c(0);function j(e){var t=e.page,c=e.setPage;return Object(d.jsxs)("header",{children:[Object(d.jsxs)("nav",{children:[Object(d.jsx)("button",{className:"projects"===t?"nav, active":"nav, inactive",onClick:function(){return c("projects")},disabled:"projects"===t,children:"projects"}),Object(d.jsx)("button",{className:"skills"===t?"nav, active":"nav, inactive",onClick:function(){return c("skills")},disabled:"skills"===t,children:"skills"})]}),Object(d.jsx)("nav",{children:Object(d.jsx)("button",{onClick:function(){return s.post("/admin/logout")},children:"log out"})})]})}var p=c(1),u=c(4),b={id:"new",title:"",description:"",image:null,url:"",github:"",rank:0,localImage:"".concat("http://localhost:5000","/images/defaultLogo.png"),skills:[]};function m(e){var t=e.project,c=e.projectForm,a=e.setProjectForm,n=e.index,l=e.skills,o=!Object.entries(c.local[n]).map((function(e){return e[1]===c.saved[n][e[0]]})).some((function(e){return!1===e})),i={apply:0===c.local[n].title.length||0===c.local[n].url.length||o,revert:o},r=function(e){var t=Object(p.a)({},c);t.local[n][e.target.name]=e.target.value,"image"===e.target.name&&(t.local[n].localImage=URL.createObjectURL(e.target.files[0])),a(t)},j=function(e,l){if(200===e.status||201===e.status){var o,i=Object(p.a)({},c);if(null===(o=e.data)||void 0===o?void 0:o.addedProject){var r=e.data.addedProject[0];i.local[0]=b,i.local.push(Object(p.a)(Object(p.a)({},t),{},{id:r})),i.saved.push(Object(p.a)(Object(p.a)({},t),{},{id:r}))}else"delete"===l?(i.local.splice(n,1),i.saved.splice(n,1)):i.saved=Object(u.a)(i.local.map((function(e){return Object(p.a)({},e)})));a(i)}else console.log("error: unexpected response from server")};return Object(d.jsxs)("form",{className:"projectForm",onSubmit:function(e){e.preventDefault(),e.persist(),function(e){var a=c.local[n].image===c.saved[n].image,l=a?"multipart/form":"application/x-www-form-urlencoded",o=0===n?"post":"put",i=0===n?"api/portfolio/projects/":"api/portfolio/projects/".concat(t.id),r=new FormData;r.append("title",e.target.title.value),r.append("description",e.target.description.value),r.append("url",e.target.url.value),r.append("github",e.target.github.value),r.append("skills",JSON.stringify(c.local[n].skills)),a&&r.append("image",e.target.image.files[0]),s({method:o,headers:{"Content-Type":l},url:i,data:r}).then((function(e){j(e,o)}))}(e)},children:[Object(d.jsxs)("div",{className:"column",children:[Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-title"),children:[Object(d.jsx)("p",{children:"title*:"}),Object(d.jsx)("input",{type:"text",value:t.title,name:"title",id:"project-".concat(t.id,"-title"),onChange:function(e){e.persist(),r(e)}})]}),Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-image"),children:[Object(d.jsx)("p",{children:"image:"}),Object(d.jsx)("img",{src:c.local[n].localImage,alt:"".concat(c.local[n].title),className:"project-image"}),Object(d.jsx)("input",{id:"project-".concat(t.id,"-image"),name:"image",type:"file",onChange:function(e){e.persist(),r(e)}})]})]}),Object(d.jsx)("div",{className:"column",children:Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-description"),children:[Object(d.jsx)("p",{children:"description:"}),Object(d.jsx)("textarea",{value:t.description,name:"description",id:"project-".concat(t.id,"-description"),onChange:function(e){e.persist(),r(e)}})]})}),Object(d.jsxs)("div",{className:"column",children:[Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-url"),children:[Object(d.jsx)("p",{children:"url:"}),Object(d.jsx)("input",{type:"text",value:t.url,name:"url",id:"project-".concat(t.id,"-url"),onChange:function(e){e.persist(),r(e)}})]}),Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-github"),children:[Object(d.jsx)("p",{children:"github:"}),Object(d.jsx)("input",{type:"text",value:t.github,name:"github",id:"project-".concat(t.id,"-github"),onChange:function(e){e.persist(),r(e)}})]}),"new"!==t.id&&Object(d.jsxs)("label",{htmlFor:"project-".concat(t.id,"-rank"),children:[Object(d.jsxs)("p",{children:["rank (",t.rank,"):"]}),Object(d.jsx)("button",{id:"project=".concat(t.id,"-rank"),disabled:1===t.rank,onClick:function(e){e.persist(),function(e){var l=new FormData,o=t.rank,i=o-1;l.append("rank",i),s({method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/api/portfolio/projects/".concat(t.id),data:l}).then((function(e){var l=Object(p.a)({},c);l.local[n].rank=i,l.local.forEach((function(e,c){e.id&&e.id!==t.id&&"new"!==e.id&&e.rank>=i&&e.rank<o&&(l.local[c].rank+=1)})),a(l),j(e,"put")}))}()},children:"promote"})]})]}),Object(d.jsxs)("div",{className:"form-buttons",children:[Object(d.jsx)("button",{type:"submit",className:"apply",disabled:i.apply,children:"new"===t.id?"add":"apply"}),Object(d.jsx)("button",{disabled:i.revert,className:"revert",onClick:function(e){e.preventDefault(),e.persist(),function(e){var t=Object(p.a)({},c);t.local[n]=Object(p.a)({},c.saved[n]),a(t)}()},children:"revert"}),0!==n&&Object(d.jsx)("button",{className:"delete",onClick:function(e){e.preventDefault(),e.persist(),s.delete("/api/portfolio/projects/".concat(t.id),{data:"asdf"}).then((function(e){200===e.status?j(e,"delete"):console.log("server error")})).catch((function(e){return console.log(e)}))},children:"delete"})]}),l.length>0&&Object(d.jsxs)("fieldset",{id:"form-footer",children:[Object(d.jsx)("p",{children:"Skills:"}),l.map((function(e){var l="p".concat(t.id,"-s").concat(e.id);return Object(d.jsxs)("label",{htmlFor:l,className:"checkbox-label",children:[Object(d.jsx)("input",{type:"checkbox",name:"skills",id:l,value:e.id,checked:c.local[n].skills.includes(e.id),onChange:function(e){e.persist(),function(e){var t=parseInt(e.target.value),l=Object(p.a)({},c),o=Object(u.a)(l.local[n].skills);-1===o.indexOf(t)?o.push(t):o.splice(o.indexOf(t),1),l.local[n].skills=o,a(l)}(e)}}),Object(d.jsx)("p",{children:e.short_name})]},l)}))]})]},"project-".concat(t.id))}function h(){var e=Object(a.useState)({saved:[],local:[]}),t=Object(i.a)(e,2),c=t[0],n=t[1],l=Object(a.useState)([]),o=Object(i.a)(l,2),r=o[0],j=o[1];return Object(a.useEffect)((function(){s.get("/api/portfolio/projects").then((function(e){var t="".concat("http://localhost:5000","/images"),c=b;n({saved:[Object(p.a)({},c)].concat(Object(u.a)(e.data.projects.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{localImage:null===e.image||""===e.image?"".concat(t,"/defaultImage.png"):"".concat(t,"/").concat(e.image)})})))),local:[Object(p.a)({},c)].concat(Object(u.a)(e.data.projects.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{localImage:null===e.image||""===e.image?"".concat(t,"/defaultImage.png"):"".concat(t,"/").concat(e.image)})}))))}),j(e.data.skills)})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Projects"}),c.local.length>0&&c.local.sort((function(e,t){return e.rank-t.rank})).map((function(e,t){return m({project:e,index:t,projectForm:c,setProjectForm:n,skills:r})})),Object(d.jsx)("p",{style:{fontSize:"smaller"},children:"*required"})]})}var g={id:"new",long_name:"",short_name:"",logo:null,localLogo:"".concat("http://localhost:5000","/images/defaultLogo.png"),proficiency:1};function f(e){var t=e.skill,c=e.index,a=e.skillForm,n=e.setSkillForm,l=!Object.entries(a.local[c]).map((function(e){return e[1]===a.saved[c][e[0]]})).some((function(e){return!1===e})),o={apply:0===a.local[c].long_name.length||l,revert:l},i=function(e){var t=Object(p.a)({},a);t.local[c][e.target.name]=e.target.value,parseInt(e.target.value)&&(t.local[c][e.target.name]=parseInt(e.target.value)),"logo"===e.target.name&&(t.local[c].localLogo=URL.createObjectURL(e.target.files[0])),n(t)},r=function(e,l){if(200===e.status||201===e.status){var o,i=Object(p.a)({},a);(null===(o=e.data)||void 0===o?void 0:o.addedSkillId)?(i.local[0]=g,i.local.push(Object(p.a)(Object(p.a)({},t),{},{id:e.data.addedSkillId})),i.saved.push(Object(p.a)(Object(p.a)({},t),{},{id:e.data.addedSkillId}))):"delete"===l?(i.local.splice(c,1),i.saved.splice(c,1)):i.saved=Object(u.a)(i.local.map((function(e){return Object(p.a)({},e)}))),n(i)}else console.log("error: unexpected response from server")};return Object(d.jsxs)("form",{className:"skillForm",onSubmit:function(e){e.preventDefault(),e.persist(),function(e){var n=a.local[c].logo===a.saved[c].logo?"multipart/form":"application/x-www-form-urlencoded",l=0===c?"post":"put",o=0===c?"api/portfolio/skills/":"api/portfolio/skills/".concat(t.id),i=new FormData;i.append("long_name",e.target.long_name.value),i.append("short_name",e.target.short_name.value),i.append("proficiency",e.target.proficiency.value),a.local[c].logo!==a.saved[c].logo&&i.append("logo",e.target.logo.files[0]),s({method:l,headers:{"Content-Type":n},url:o,data:i}).then((function(e){r(e,l)}))}(e)},children:[Object(d.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-long_name"),children:[Object(d.jsx)("p",{children:"long name*:"}),Object(d.jsx)("input",{type:"text",value:a.local[c].long_name,id:"skill-".concat(t.id,"-long_name"),name:"long_name",className:a.local[c].long_name===a.saved[c].long_name?"unchanged":"changed",onChange:function(e){e.persist(),e.preventDefault(),i(e)}})]}),Object(d.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-short_name"),children:[Object(d.jsx)("p",{children:"short name:"}),Object(d.jsx)("input",{type:"text",value:a.local[c].short_name,id:"skill-".concat(t.id,"-short_name"),name:"short_name",className:a.local[c].short_name===a.saved[c].short_name?"unchanged":"changed",onChange:function(e){e.persist(),e.preventDefault(),i(e)}})]}),Object(d.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-logo"),style:{flex:0},children:[Object(d.jsx)("p",{children:"logo:"}),Object(d.jsx)("img",{src:a.local[c].localLogo,id:"skill".concat(t.id,"-img"),alt:"".concat(a.local[c].long_name,"-logo"),className:"logo"}),Object(d.jsx)("input",{id:"skill-".concat(t.id,"-logo"),name:"logo",type:"file",onChange:function(e){e.persist(),i(e)}})]}),Object(d.jsxs)("label",{htmlFor:"skill-".concat(t.id,"-proficiency"),children:[Object(d.jsx)("p",{children:"proficiency:"}),Object(d.jsxs)("select",{value:a.local[c].proficiency,id:"skill-".concat(t.id,"-proficiency"),name:"proficiency",className:a.local[c].proficiency===a.saved[c].proficiency?"unchanged":"changed",onChange:function(e){e.persist(),i(e)},children:[Object(d.jsx)("option",{value:1,children:"beginner"}),Object(d.jsx)("option",{value:2,children:"intermediate"}),Object(d.jsx)("option",{value:3,children:"advanced"}),Object(d.jsx)("option",{value:4,children:"expert"})]})]}),Object(d.jsxs)("span",{className:"form-buttons",children:[Object(d.jsx)("button",{type:"submit",className:"apply",disabled:o.apply,children:"new"===t.id?"add":"apply"}),Object(d.jsx)("button",{disabled:o.revert,className:"revert",onClick:function(e){e.preventDefault(),e.persist(),function(e){var t=Object(p.a)({},a);t.local[c]=Object(p.a)({},a.saved[c]),n(t)}()},children:"revert"}),0!==c&&Object(d.jsx)("button",{className:"delete",onClick:function(e){e.preventDefault(),e.persist(),s.delete("/api/portfolio/skills/".concat(t.id),{data:"asdf"}).then((function(e){200===e.status?r(e,"delete"):console.log("server error")})).catch((function(e){return console.log(e)}))},children:"delete"})]})]},"skill-".concat(t.id))}function O(){var e=Object(a.useState)({saved:[],local:[]}),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){s.get("/api/portfolio/skills").then((function(e){var t="".concat("http://localhost:5000","/images"),c=g;n({saved:[Object(p.a)({},c)].concat(Object(u.a)(e.data.skills.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{localLogo:null===e.logo?"".concat(t,"/defaultLogo.png"):"".concat(t,"/").concat(e.logo)})})))),local:[Object(p.a)({},c)].concat(Object(u.a)(e.data.skills.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{localLogo:null===e.logo?"".concat(t,"/defaultLogo.png"):"".concat(t,"/").concat(e.logo)})}))))})})).catch((function(e){return console.log(e)}))}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"skills"}),c.local.length>0&&c.local.map((function(e,t){return f({skill:e,index:t,skillForm:c,setSkillForm:n})})),Object(d.jsx)("p",{style:{fontSize:"smaller"},children:"*required"})]})}var v=function(){var e=Object(a.useState)("projects"),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(d.jsxs)("div",{id:"mainContainer",children:[Object(d.jsx)(j,{page:c,setPage:n}),Object(d.jsxs)("div",{id:"contentContainer",children:["projects"===c&&Object(d.jsx)(h,{}),"skills"===c&&Object(d.jsx)(O,{})]})]})},x=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,46)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,l=t.getLCP,o=t.getTTFB;c(e),a(e),n(e),l(e),o(e)}))};o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),x()}},[[45,1,2]]]);
//# sourceMappingURL=main.e4b1b45d.chunk.js.map